{% extends "base.html" %}

{% block title %}Trustee Dashboard{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="md:flex md:items-center md:justify-between">
        <div class="flex-1 min-w-0">
            <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">
                Trustee Dashboard
            </h2>
            <p class="mt-1 text-sm text-gray-500">
                Manage the accounts you're trusted with
            </p>
        </div>
    </div>

    <div class="mt-8">
        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <div class="px-4 py-5 sm:px-6">
                <h3 class="text-lg leading-6 font-medium text-gray-900">
                    Trusted Accounts
                </h3>
                <p class="mt-1 text-sm text-gray-500">
                    Accounts you have been designated as a trustee for
                </p>
            </div>
            
            {% if trusted_users %}
                <div class="border-t border-gray-200">
                    <ul class="divide-y divide-gray-200">
                        {% for trust in trusted_users %}
                            <li>
                                <div class="px-4 py-5 sm:px-6">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h4 class="text-lg font-medium text-gray-900">
                                                {{ trust.user.first_name }} {{ trust.user.last_name }}
                                            </h4>
                                            <p class="mt-1 text-sm text-gray-500">
                                                {{ trust.user.email }}
                                            </p>
                                        </div>
                                        <div class="ml-4">
                                            {% if trust.notification_triggered %}
                                                <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800">
                                                    Active
                                                </span>
                                                <p class="mt-1 text-xs text-gray-500">
                                                    Activated on {{ trust.triggered_at.strftime('%Y-%m-%d') }}
                                                </p>
                                            {% else %}
                                                <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-gray-100 text-gray-800">
                                                    Pending
                                                </span>
                                            {% endif %}
                                        </div>
                                    </div>

                                    {% if trust.notification_triggered %}
                                        <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
                                            <!-- Messages -->
                                            <div class="border rounded-lg p-4">
                                                <h5 class="text-sm font-medium text-gray-900">Messages</h5>
                                                <p class="mt-1 text-sm text-gray-500">
                                                    View and manage messages left for loved ones
                                                </p>
                                                <a href="#" class="mt-2 inline-flex items-center text-sm text-[#0A7075] hover:text-[#0C969C]">
                                                    View messages
                                                    <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                                    </svg>
                                                </a>
                                            </div>

                                            <!-- Assets -->
                                            <div class="border rounded-lg p-4">
                                                <h5 class="text-sm font-medium text-gray-900">Assets</h5>
                                                <p class="mt-1 text-sm text-gray-500">
                                                    View registered assets and documents
                                                </p>
                                                <a href="#" class="mt-2 inline-flex items-center text-sm text-[#0A7075] hover:text-[#0C969C]">
                                                    View assets
                                                    <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                                    </svg>
                                                </a>
                                            </div>

                                            <!-- Last Wishes -->
                                            <div class="border rounded-lg p-4">
                                                <h5 class="text-sm font-medium text-gray-900">Last Wishes</h5>
                                                <p class="mt-1 text-sm text-gray-500">
                                                    View final arrangements and requests
                                                </p>
                                                <a href="#" class="mt-2 inline-flex items-center text-sm text-[#0A7075] hover:text-[#0C969C]">
                                                    View wishes
                                                    <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                                    </svg>
                                                </a>
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="mt-4">
                                            <p class="text-sm text-gray-500">
                                                You will be notified when access to this account is granted.
                                            </p>
                                        </div>
                                    {% endif %}
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% else %}
                <div class="px-4 py-5 sm:px-6 text-center">
                    <p class="text-sm text-gray-500">
                        You haven't been designated as a trustee for any accounts yet.
                    </p>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="mt-8 bg-white shadow sm:rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
                About Being a Trustee
            </h3>
            <div class="mt-2 max-w-xl text-sm text-gray-500">
                <p>
                    As a trustee, you have been entrusted with the responsibility of managing and distributing digital assets, 
                    messages, and final wishes according to the account holder's instructions. This role becomes active only 
                    when specific conditions are met or when explicitly activated by the account holder.
                </p>
            </div>
            <div class="mt-3 text-sm">
                <a href="#" class="font-medium text-[#0A7075] hover:text-[#0C969C]">
                    Learn more about trustee responsibilities
                    <span aria-hidden="true"> &rarr;</span>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
