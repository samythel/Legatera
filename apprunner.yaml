version: 1.0
runtime: python3
build:
  commands:
    pre-build:
      - amazon-linux-extras enable python3.9
      - yum clean metadata
      - yum -y install python3.9
    build:
      - python3.9 -m pip install --upgrade pip
      - python3.9 -m pip install pipenv
      - pipenv install --deploy --system
run:
  command: gunicorn --bind 0.0.0.0:5002 --workers 4 --timeout 0 "app:app"
  network:
    port: 5002
  env:
    - name: FLASK_ENV
      value: production
    - name: PYTHONPATH
      value: .
